plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.9.20'
    id 'pizzk.gradle.maven.repo'
}

group = 'pizzk.gradle.plugin'
version = '1.0.0'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.jetbrains.kotlin:kotlin-test'
}

test {
    useJUnitPlatform()
}
kotlin {
    jvmToolchain(19)
}

mavenrepo {
    changing(false)
    manifests {
        it.local()
        it.gitee(false)
    }
    locate {
        it.name("local:snapshot")
        it.name("jitpack")
    }
}

task testFindMavenLocalURI {
    doLast {
        String name = 'local:snapshot'
        println("find maven repo `$name` uri: ${MavenRepoExt.findMavenLocalURI(name)}")
    }
}